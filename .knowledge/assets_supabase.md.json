{"is_source_file": true, "format": "Markdown", "description": "Documentation describing the Supabase backend architecture, database schema, role management, policies, and configuration for the RoadRescue QuickAssist platform. The file details environment setup, access control policies, table structures, triggers, indexes, and role-based permissions, providing an overview for developers working with the platform.", "external_files": [], "external_methods": ["public.current_role()", "public.is_admin()", "public.is_mechanic()", "public.set_updated_at()", "public.requests_status_lifecycle()"], "published": [], "classes": [], "methods": [{"name": "public.current_role()", "description": "Returns the current user's role based on the JWT app_metadata role claim, defaulting to 'user' if not set."}, {"name": "public.is_admin()", "description": "Checks if the current user has an admin role by comparing the role to 'admin'."}, {"name": "public.is_mechanic()", "description": "Checks if the current user has a mechanic role (not detailed in provided file, but implied by role model)."}, {"name": "public.set_updated_at()", "description": "A trigger function that sets the 'updated_at' timestamp to the current time before row updates."}, {"name": "public.requests_status_lifecycle()", "description": "Trigger function to manage timestamp fields (`submitted_at`, `accepted_at`, `arrived_at`, etc.) in the `requests` table based on status changes."}], "calls": ["public.current_role()", "public.is_admin()", "public.is_mechanic()", "public.set_updated_at()", "public.requests_status_lifecycle()"], "search-terms": ["Supabase backend", "RoadRescue QuickAssist", "role-based RLS policies", "requests table schema", "mechanic_profiles", "request_notes", "environment variables", "Supabase roles", "Supabase triggers", "PostgreSQL indexes"], "state": 2, "file_id": 93, "knowledge_revision": 406, "git_revision": "c5b56068f67749debec6fd9f74a1d118db2a6158", "revision_history": [{"366": "7f89aabd1647f218744f20152fa1a8ca9f3b0e02"}, {"389": "7f89aabd1647f218744f20152fa1a8ca9f3b0e02"}, {"390": "0b3454c020402a76cfe02b9cf100b14d5fa04135"}, {"391": "0b3454c020402a76cfe02b9cf100b14d5fa04135"}, {"399": "38508ed5678edde7df2cfbfbff45061b7786b9bf"}, {"400": "38508ed5678edde7df2cfbfbff45061b7786b9bf"}, {"401": "f5e6a973e3e418c6b6cd56ee5dc491cbad3d4edf"}, {"402": "f5e6a973e3e418c6b6cd56ee5dc491cbad3d4edf"}, {"403": "f5e6a973e3e418c6b6cd56ee5dc491cbad3d4edf"}, {"404": "f5e6a973e3e418c6b6cd56ee5dc491cbad3d4edf"}, {"406": "c5b56068f67749debec6fd9f74a1d118db2a6158"}], "hash": "4e09406fa0f42b1a7f6128b936a5e385", "format-version": 4, "code-base-name": "frontend_user_website", "filename": "assets/supabase.md"}