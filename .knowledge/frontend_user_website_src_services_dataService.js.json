{"is_source_file": true, "format": "JavaScript", "description": "This file provides a data service abstraction for a vehicle roadside assistance platform, supporting both localStorage mock mode and integration with a Supabase backend. It manages user registration, login, session handling, request creation, and real-time auth state subscriptions, with specific handling for vehicle and contact data structures.", "external_files": ["./statusUtils", "./supabaseClient"], "external_methods": ["normalizeStatus", "supabase", "isSupabaseConfigured as isSupabaseConfiguredClient"], "published": ["dataService"], "classes": [], "methods": [{"name": "register", "description": "Registers a new user, either via Supabase auth or local mock, and initializes seed data if not already seeded."}, {"name": "login", "description": "Logs in a user with email and password, using Supabase or local mock."}, {"name": "loginWithGoogle", "description": "Initiates OAuth login with Google via Supabase."}, {"name": "logout", "description": "Logs out the current user, clearing session in local mock mode."}, {"name": "getCurrentUser", "description": "Retrieves the current authenticated user, with role and approval status, from Supabase or local mock."}, {"name": "subscribeToAuthChanges", "description": "Subscribes to authentication state changes via Supabase, with a no-op fallback."}, {"name": "listRequests", "description": "Lists all requests, with optional filtering by user ID, normalizing vehicle and contact data."}, {"name": "getRequestById", "description": "Fetches a specific request by ID."}, {"name": "createRequest", "description": "Creates a new request, storing minimal vehicle info and contact details, with support for both Supabase and local mock."}, {"name": "isSupabaseConfigured", "description": "Checks if Supabase environment variables are set, indicating backend configuration."}], "calls": ["normalizeStatus", "supabase", "isSupabaseConfiguredClient", "getSupabase", "supa.auth.signUp", "supa.auth.signInWithPassword", "supa.auth.signInWithOAuth", "supa.auth.signOut", "supa.auth.getUser", "supa.from", "supaGetUserRole", "supaUserToAppUser"], "search-terms": ["dataService", "localStorage", "supabase", "vehicle", "request", "auth", "user", "session", "seed data", "requests list", "create request"], "state": 2, "file_id": 46, "knowledge_revision": 275, "git_revision": "15b5e00133c728e31f7cfdd11b3f578418e3e946", "revision_history": [{"191": "3025b3e4a5b188b27382691bd8c47200eeb5cf56"}, {"200": "ca09881e92259bc04b5062fe7eafb5aba25ec941"}, {"205": "ca09881e92259bc04b5062fe7eafb5aba25ec941"}, {"242": "15b5e00133c728e31f7cfdd11b3f578418e3e946"}, {"275": "15b5e00133c728e31f7cfdd11b3f578418e3e946"}], "ctags": [], "filename": "frontend_user_website/src/services/dataService.js", "format-version": 4, "code-base-name": "https://github.com/kavia-common/roadrescue-quickassist-platform-41193-41202.git:kavia-main"}