{"is_source_file": true, "format": "JavaScript", "description": "This file defines a dataService module that provides functions for user authentication, profile management, and request handling using Supabase. It includes methods for user registration, login, OAuth login, session management, profile retrieval, request listing, creation, and error normalization.", "external_files": ["./statusUtils", "./supabaseClient", "../config/appConfig", "../utils/withTimeout"], "external_methods": ["getSupabase", "normalizeStatus", "withTimeout"], "published": ["dataService"], "classes": [], "methods": [{"name": "supaUserToAppUser", "description": "Converts a Supabase auth user object into a minimal app user object, attempting to read role and approval status from the profiles table."}, {"name": "normalizeVehicle", "description": "Normalizes vehicle data from database row or input object to an object with make and model strings."}, {"name": "normalizeContact", "description": "Normalizes contact data from database row or input object to an object with name and phone strings."}, {"name": "forceUserCreateStatusOpen", "description": "Ensures request payload has status set to 'open' and strips any caller-provided status."}, {"name": "normalizeSupabaseAuthError", "description": "Converts various Supabase error messages into user-friendly strings."}], "calls": ["getSupabase", "supabase.from(\"profiles\").select(...).eq(...).maybeSingle()", "supabase.from(\"profiles\").insert(...)", "supabase.auth.signUp(...)", "supabase.auth.signInWithPassword(...)", "supabase.auth.signInWithOAuth(...)", "supabase.auth.signOut()", "supabase.auth.getSession()", "supabase.auth.getUser()", "supabase.from(\"profiles\").select(\"*\").eq(\"id\", ...).maybeSingle()", "supabase.from(\"requests\").select(\"*\").order(...)", "supabase.from(\"requests\").eq(\"user_id\", ...).select(\"*\")", "supabase.from(\"requests\").insert({...})"], "search-terms": ["supabase", "auth", "profile", "request", "createRequest", "normalizeVehicle", "normalizeContact", "error handling", "user management", "dataService"], "state": 2, "file_id": 73, "knowledge_revision": 579, "git_revision": "5f64b6421409fd8c8a1a0b94d8166a832c679158", "revision_history": [{"352": "15b5e00133c728e31f7cfdd11b3f578418e3e946"}, {"498": "4df64072ecff4147ced1d3bd08d6f9db6d098f5b"}, {"502": "40fbc15814f3eb78e86fa58f45962c80516c6a2f"}, {"506": "40fbc15814f3eb78e86fa58f45962c80516c6a2f"}, {"507": "858bd544d4145b53d875745a371f7d93eb79e402"}, {"508": "6975d6bdc8fdcedd670d3c075567e32ed6853ff4"}, {"510": "ce807ae69b7652497756a309ba3b8200602259df"}, {"552": "5f64b6421409fd8c8a1a0b94d8166a832c679158"}, {"579": "5f64b6421409fd8c8a1a0b94d8166a832c679158"}], "ctags": [], "filename": "frontend_user_website/src/services/dataService.js", "format-version": 4, "code-base-name": "https://github.com/kavia-common/roadrescue-quickassist-platform-41193-41202.git:kavia-main"}