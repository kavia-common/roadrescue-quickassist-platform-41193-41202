{"is_source_file": true, "format": "JavaScript", "description": "This file provides a data service module for a frontend web application, handling data operations related to user sessions, requests, and integration with Supabase or local storage as a mock mode. It includes functions for user authentication, request management, subscription to real-time updates, seed data initialization, and utility functions like timeout handling.", "external_files": ["./statusUtils", "./supabaseClient"], "external_methods": ["normalizeStatus", "supabase", "isSupabaseConfigured as isSupabaseConfiguredClient"], "published": ["dataService"], "classes": [], "methods": [{"name": "subscribeToRequestsChanged(handler)", "description": "Sets up an event listener for requests changes, subscribing to real-time updates from Supabase if available, or local events in mock mode.", "scope": "dataService", "scopeKind": "class"}, {"name": "register(email, password)", "description": "Registers a new user either via Supabase or local mock data, initializing seed data if needed.", "scope": "dataService", "scopeKind": "class"}, {"name": "login(email, password)", "description": "Authenticates a user via Supabase or local mock data, setting the session accordingly.", "scope": "dataService", "scopeKind": "class"}, {"name": "loginWithGoogle({ redirectTo } = {})", "description": "Initiates a Google OAuth login flow using Supabase auth, with redirect handling.", "scope": "dataService", "scopeKind": "class"}, {"name": "logout()", "description": "Logs out the user, clearing session in mock mode or signing out via Supabase.", "scope": "dataService", "scopeKind": "class"}, {"name": "getCurrentUser()", "description": "Retrieves the current authenticated user information, including role and approval status, from Supabase or local mock data.", "scope": "dataService", "scopeKind": "class"}, {"name": "subscribeToAuthChanges(onUserChanged)", "description": "Subscribes to authentication state changes, invoking callback on user login/logout.", "scope": "dataService", "scopeKind": "class"}, {"name": "listRequests({ forUserId } = {})", "description": "Fetches a list of requests from the database or local storage, normalizing fields such as vehicle and contact.", "scope": "dataService", "scopeKind": "class"}, {"name": "getRequestById(requestId)", "description": "Fetches a specific request by its ID.", "scope": "dataService", "scopeKind": "class"}, {"name": "createRequest({ user, vehicle, issueDescription, contact })", "description": "Creates a new request, inserting into Supabase or local storage, normalizing data fields, and emitting change events.", "scope": "dataService", "scopeKind": "class"}, {"name": "isSupabaseConfigured()", "description": "Checks if the environment variables required for Supabase are configured.", "scope": "", "scopeKind": ""}, {"name": "clearLocalSession()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "emitRequestsChanged(detail)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "ensureSeedData()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "formatAuthError(err, context)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "getLocalRequests()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "getLocalSession()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "getLocalUsers()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "getSupabase()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "isTimeoutErrorMessage(msg)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "readJson(key, fallback)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "setLocalRequests(reqs)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "setLocalSession(session)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "setLocalUsers(users)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "supaGetUserRole(supa, userId, email)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "supaUserToAppUser(supaUser)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "uid(prefix = \"id\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "withTimeout(promise, ms, label)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "writeJson(key, value)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["withTimeout", "supabase.auth.signUp", "supabase.auth.signInWithPassword", "supabase.auth.signInWithOAuth", "supabase.auth.signOut", "supabase.auth.getUser", "supabase.from", "supabase.channel", "supabase.removeChannel", "normalizeStatus"], "search-terms": ["dataService", "requests-changed", "supabase", "localStorage", "seed data", "requests", "user auth", "request creation", "real-time updates", "environment variables"], "state": 2, "file_id": 84, "knowledge_revision": 347, "git_revision": "45c98fce981823194a7bed8ddafad5a4216a17e4", "revision_history": [{"339": "15b5e00133c728e31f7cfdd11b3f578418e3e946"}, {"343": "15b5e00133c728e31f7cfdd11b3f578418e3e946"}, {"344": "45c98fce981823194a7bed8ddafad5a4216a17e4"}, {"347": "45c98fce981823194a7bed8ddafad5a4216a17e4"}], "ctags": [{"_type": "tag", "name": "LS_KEYS", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^const LS_KEYS = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "REQUESTS_CHANGED_EVENT", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^const REQUESTS_CHANGED_EVENT = \"requests-changed\";$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "assignedMechanicEmail", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^        assignedMechanicEmail: data.assigned_mechanic_email,$/", "language": "JavaScript", "kind": "property", "scope": "dataService.createRequest.created", "scopeKind": "class"}, {"_type": "tag", "name": "assignedMechanicId", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^        assignedMechanicId: data.assigned_mechanic_id,$/", "language": "JavaScript", "kind": "property", "scope": "dataService.createRequest.created", "scopeKind": "class"}, {"_type": "tag", "name": "assigned_mechanic_email", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^        assigned_mechanic_email: null,$/", "language": "JavaScript", "kind": "property", "scope": "dataService.createRequest.insertPayload", "scopeKind": "class"}, {"_type": "tag", "name": "assigned_mechanic_id", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^        assigned_mechanic_id: null,$/", "language": "JavaScript", "kind": "property", "scope": "dataService.createRequest.insertPayload", "scopeKind": "class"}, {"_type": "tag", "name": "clearLocalSession", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^function clearLocalSession() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "contact", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^        contact: contactObj,$/", "language": "JavaScript", "kind": "property", "scope": "dataService.createRequest.created", "scopeKind": "class"}, {"_type": "tag", "name": "contact", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^        contact: safeContact,$/", "language": "JavaScript", "kind": "property", "scope": "dataService.createRequest.insertPayload", "scopeKind": "class"}, {"_type": "tag", "name": "createRequest", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^  async createRequest({ user, vehicle, issueDescription, contact }) {$/", "language": "JavaScript", "kind": "method", "signature": "({ user, vehicle, issueDescription, contact })", "scope": "dataService", "scopeKind": "class"}, {"_type": "tag", "name": "created", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^      const created = {$/", "language": "JavaScript", "kind": "class", "scope": "dataService.createRequest", "scopeKind": "class"}, {"_type": "tag", "name": "createdAt", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^        createdAt: data.created_at,$/", "language": "JavaScript", "kind": "property", "scope": "dataService.createRequest.created", "scopeKind": "class"}, {"_type": "tag", "name": "createdAt", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^      createdAt: nowIso,$/", "language": "JavaScript", "kind": "property", "scope": "dataService.createRequest.request", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^        created_at: nowIso,$/", "language": "JavaScript", "kind": "property", "scope": "dataService.createRequest.insertPayload", "scopeKind": "class"}, {"_type": "tag", "name": "dataService", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^export const dataService = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^    const user = { id: uid(\"u\"), email, password, role: \"user\", approved: true };$/", "language": "JavaScript", "kind": "field", "scope": "dataService.register.user", "scopeKind": "class"}, {"_type": "tag", "name": "emitRequestsChanged", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^function emitRequestsChanged(detail) {$/", "language": "JavaScript", "kind": "function", "signature": "(detail)"}, {"_type": "tag", "name": "ensureSeedData", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^function ensureSeedData() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "fees", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^  fees: \"rrqa.fees\",$/", "language": "JavaScript", "kind": "property", "scope": "LS_KEYS", "scopeKind": "class"}, {"_type": "tag", "name": "formatAuthError", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^function formatAuthError(err, context) {$/", "language": "JavaScript", "kind": "function", "signature": "(err, context)"}, {"_type": "tag", "name": "getCurrentUser", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^  async getCurrentUser() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "dataService", "scopeKind": "class"}, {"_type": "tag", "name": "getLocalRequests", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^function getLocalRequests() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getLocalSession", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^function getLocalSession() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getLocalUsers", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^function getLocalUsers() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getRequestById", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^  async getRequestById(requestId) {$/", "language": "JavaScript", "kind": "method", "signature": "(requestId)", "scope": "dataService", "scopeKind": "class"}, {"_type": "tag", "name": "getSupabase", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^function getSupabase() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^        id: data.id,$/", "language": "JavaScript", "kind": "property", "scope": "dataService.createRequest.created", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^      id: uid(\"req\"),$/", "language": "JavaScript", "kind": "property", "scope": "dataService.createRequest.request", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^    const user = { id: uid(\"u\"), email, password, role: \"user\", approved: true };$/", "language": "JavaScript", "kind": "property", "scope": "dataService.register.user", "scopeKind": "class"}, {"_type": "tag", "name": "insertPayload", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^      const insertPayload = {$/", "language": "JavaScript", "kind": "class", "scope": "dataService.createRequest", "scopeKind": "class"}, {"_type": "tag", "name": "isSupabaseConfigured", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^  isSupabaseConfigured,$/", "language": "JavaScript", "kind": "field", "scope": "dataService", "scopeKind": "class"}, {"_type": "tag", "name": "isSupabaseConfigured", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^function isSupabaseConfigured() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "isTimeoutErrorMessage", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^function isTimeoutErrorMessage(msg) {$/", "language": "JavaScript", "kind": "function", "signature": "(msg)"}, {"_type": "tag", "name": "issueDescription", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^        issueDescription: data.issue_description,$/", "language": "JavaScript", "kind": "property", "scope": "dataService.createRequest.created", "scopeKind": "class"}, {"_type": "tag", "name": "issueDescription", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^      issueDescription,$/", "language": "JavaScript", "kind": "field", "scope": "dataService.createRequest.request", "scopeKind": "class"}, {"_type": "tag", "name": "issue_description", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^        issue_description: issueDescription,$/", "language": "JavaScript", "kind": "property", "scope": "dataService.createRequest.insertPayload", "scopeKind": "class"}, {"_type": "tag", "name": "listRequests", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^  async listRequests({ forUserId } = {}) {$/", "language": "JavaScript", "kind": "method", "signature": "({ forUserId } = {})", "scope": "dataService", "scopeKind": "class"}, {"_type": "tag", "name": "login", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^  async login(email, password) {$/", "language": "JavaScript", "kind": "method", "signature": "(email, password)", "scope": "dataService", "scopeKind": "class"}, {"_type": "tag", "name": "loginWithGoogle", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^  async loginWithGoogle({ redirectTo } = {}) {$/", "language": "JavaScript", "kind": "method", "signature": "({ redirectTo } = {})", "scope": "dataService", "scopeKind": "class"}, {"_type": "tag", "name": "logout", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^  async logout() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "dataService", "scopeKind": "class"}, {"_type": "tag", "name": "make", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^        make: typeof vehicleObj.make === \"string\" ? vehicleObj.make : \"\",$/", "language": "JavaScript", "kind": "property", "scope": "dataService.createRequest.vehicleObj", "scopeKind": "class"}, {"_type": "tag", "name": "make", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^      make: vehicle && typeof vehicle.make === \"string\" ? vehicle.make : \"\",$/", "language": "JavaScript", "kind": "property", "scope": "dataService.createRequest.safeVehicle", "scopeKind": "class"}, {"_type": "tag", "name": "model", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^        model: typeof vehicleObj.model === \"string\" ? vehicleObj.model : \"\",$/", "language": "JavaScript", "kind": "property", "scope": "dataService.createRequest.vehicleObj", "scopeKind": "class"}, {"_type": "tag", "name": "model", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^      model: vehicle && typeof vehicle.model === \"string\" ? vehicle.model : \"\",$/", "language": "JavaScript", "kind": "property", "scope": "dataService.createRequest.safeVehicle", "scopeKind": "class"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^      name: contact?.name || \"\",$/", "language": "JavaScript", "kind": "property", "scope": "dataService.createRequest.safeContact", "scopeKind": "class"}, {"_type": "tag", "name": "notes", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^        notes: [],$/", "language": "JavaScript", "kind": "property", "scope": "dataService.createRequest.insertPayload", "scopeKind": "class"}, {"_type": "tag", "name": "notes", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^        notes: data.notes || [],$/", "language": "JavaScript", "kind": "property", "scope": "dataService.createRequest.created", "scopeKind": "class"}, {"_type": "tag", "name": "phone", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^      phone: contact?.phone || \"\",$/", "language": "JavaScript", "kind": "property", "scope": "dataService.createRequest.safeContact", "scopeKind": "class"}, {"_type": "tag", "name": "readJson", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^function readJson(key, fallback) {$/", "language": "JavaScript", "kind": "function", "signature": "(key, fallback)"}, {"_type": "tag", "name": "register", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^  async register(email, password) {$/", "language": "JavaScript", "kind": "method", "signature": "(email, password)", "scope": "dataService", "scopeKind": "class"}, {"_type": "tag", "name": "request", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^    const request = {$/", "language": "JavaScript", "kind": "class", "scope": "dataService.createRequest", "scopeKind": "class"}, {"_type": "tag", "name": "requests", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^  requests: \"rrqa.requests\",$/", "language": "JavaScript", "kind": "property", "scope": "LS_KEYS", "scopeKind": "class"}, {"_type": "tag", "name": "safeContact", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^    const safeContact = {$/", "language": "JavaScript", "kind": "class", "scope": "dataService.createRequest", "scopeKind": "class"}, {"_type": "tag", "name": "safeVehicle", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^    const safeVehicle = {$/", "language": "JavaScript", "kind": "class", "scope": "dataService.createRequest", "scopeKind": "class"}, {"_type": "tag", "name": "seeded", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^  seeded: \"rrqa.seeded\",$/", "language": "JavaScript", "kind": "property", "scope": "LS_KEYS", "scopeKind": "class"}, {"_type": "tag", "name": "session", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^  session: \"rrqa.session\",$/", "language": "JavaScript", "kind": "property", "scope": "LS_KEYS", "scopeKind": "class"}, {"_type": "tag", "name": "setLocalRequests", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^function setLocalRequests(reqs) {$/", "language": "JavaScript", "kind": "function", "signature": "(reqs)"}, {"_type": "tag", "name": "setLocalSession", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^function setLocalSession(session) {$/", "language": "JavaScript", "kind": "function", "signature": "(session)"}, {"_type": "tag", "name": "setLocalUsers", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^function setLocalUsers(users) {$/", "language": "JavaScript", "kind": "function", "signature": "(users)"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^        status: \"open\", \\/\\/ always open on create$/", "language": "JavaScript", "kind": "property", "scope": "dataService.createRequest.insertPayload", "scopeKind": "class"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^        status: data.status,$/", "language": "JavaScript", "kind": "property", "scope": "dataService.createRequest.created", "scopeKind": "class"}, {"_type": "tag", "name": "subscribeToAuthChanges", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^  subscribeToAuthChanges(onUserChanged) {$/", "language": "JavaScript", "kind": "method", "signature": "(onUserChanged)", "scope": "dataService", "scopeKind": "class"}, {"_type": "tag", "name": "subscribeToRequestsChanged", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^  subscribeToRequestsChanged(handler) {$/", "language": "JavaScript", "kind": "method", "signature": "(handler)", "scope": "dataService", "scopeKind": "class"}, {"_type": "tag", "name": "supaGetUserRole", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^async function supaGetUserRole(supa, userId, email) {$/", "language": "JavaScript", "kind": "function", "signature": "(supa, userId, email)"}, {"_type": "tag", "name": "supaUserToAppUser", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^async function supaUserToAppUser(supaUser) {$/", "language": "JavaScript", "kind": "function", "signature": "(supaUser)"}, {"_type": "tag", "name": "uid", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^function uid(prefix = \"id\") {$/", "language": "JavaScript", "kind": "function", "signature": "(prefix = \"id\")"}, {"_type": "tag", "name": "updated_at", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^        updated_at: nowIso,$/", "language": "JavaScript", "kind": "property", "scope": "dataService.createRequest.insertPayload", "scopeKind": "class"}, {"_type": "tag", "name": "user", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^    const user = { id: uid(\"u\"), email, password, role: \"user\", approved: true };$/", "language": "JavaScript", "kind": "class", "scope": "dataService.register", "scopeKind": "class"}, {"_type": "tag", "name": "userEmail", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^        userEmail: data.user_email,$/", "language": "JavaScript", "kind": "property", "scope": "dataService.createRequest.created", "scopeKind": "class"}, {"_type": "tag", "name": "userEmail", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^      userEmail: user.email,$/", "language": "JavaScript", "kind": "property", "scope": "dataService.createRequest.request", "scopeKind": "class"}, {"_type": "tag", "name": "userId", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^        userId: data.user_id,$/", "language": "JavaScript", "kind": "property", "scope": "dataService.createRequest.created", "scopeKind": "class"}, {"_type": "tag", "name": "userId", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^      userId: user.id,$/", "language": "JavaScript", "kind": "property", "scope": "dataService.createRequest.request", "scopeKind": "class"}, {"_type": "tag", "name": "user_email", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^        user_email: user.email,$/", "language": "JavaScript", "kind": "property", "scope": "dataService.createRequest.insertPayload", "scopeKind": "class"}, {"_type": "tag", "name": "user_id", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^        user_id: user.id,$/", "language": "JavaScript", "kind": "property", "scope": "dataService.createRequest.insertPayload", "scopeKind": "class"}, {"_type": "tag", "name": "users", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^  users: \"rrqa.users\",$/", "language": "JavaScript", "kind": "property", "scope": "LS_KEYS", "scopeKind": "class"}, {"_type": "tag", "name": "vehicle", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^        vehicle: safeVehicle,$/", "language": "JavaScript", "kind": "property", "scope": "dataService.createRequest.insertPayload", "scopeKind": "class"}, {"_type": "tag", "name": "vehicle", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^        vehicle: vehicleObj,$/", "language": "JavaScript", "kind": "property", "scope": "dataService.createRequest.created", "scopeKind": "class"}, {"_type": "tag", "name": "vehicle", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^      vehicle: safeVehicle, \\/\\/ only make\\/model is stored for \"vehicle\"$/", "language": "JavaScript", "kind": "property", "scope": "dataService.createRequest.request", "scopeKind": "class"}, {"_type": "tag", "name": "vehicleObj", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^      vehicleObj = {$/", "language": "JavaScript", "kind": "class", "scope": "dataService.createRequest", "scopeKind": "class"}, {"_type": "tag", "name": "withTimeout", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^function withTimeout(promise, ms, label) {$/", "language": "JavaScript", "kind": "function", "signature": "(promise, ms, label)"}, {"_type": "tag", "name": "writeJson", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41202/frontend_user_website/src/services/dataService.js", "pattern": "/^function writeJson(key, value) {$/", "language": "JavaScript", "kind": "function", "signature": "(key, value)"}], "hash": "5c9a689a09d54fe8ee25f8a7f3998cc0", "format-version": 4, "code-base-name": "frontend_user_website", "filename": "frontend_user_website/src/services/dataService.js", "fields": [{"name": "assignedMechanicEmail: data.assigned_mechanic_email,", "scope": "dataService.createRequest.created", "scopeKind": "class", "description": "unavailable"}, {"name": "assignedMechanicId: data.assigned_mechanic_id,", "scope": "dataService.createRequest.created", "scopeKind": "class", "description": "unavailable"}, {"name": "assigned_mechanic_email: null,", "scope": "dataService.createRequest.insertPayload", "scopeKind": "class", "description": "unavailable"}, {"name": "assigned_mechanic_id: null,", "scope": "dataService.createRequest.insertPayload", "scopeKind": "class", "description": "unavailable"}, {"name": "contact: contactObj,", "scope": "dataService.createRequest.created", "scopeKind": "class", "description": "unavailable"}, {"name": "contact: safeContact,", "scope": "dataService.createRequest.insertPayload", "scopeKind": "class", "description": "unavailable"}, {"name": "createdAt: data.created_at,", "scope": "dataService.createRequest.created", "scopeKind": "class", "description": "unavailable"}, {"name": "createdAt: nowIso,", "scope": "dataService.createRequest.request", "scopeKind": "class", "description": "unavailable"}, {"name": "created_at: nowIso,", "scope": "dataService.createRequest.insertPayload", "scopeKind": "class", "description": "unavailable"}, {"name": "const user = { id: uid(\"u\"), email, password, role: \"user\", approved: true };", "scope": "dataService.register.user", "scopeKind": "class", "description": "unavailable"}, {"name": "fees: \"rrqa.fees\",", "scope": "LS_KEYS", "scopeKind": "class", "description": "unavailable"}, {"name": "id: data.id,", "scope": "dataService.createRequest.created", "scopeKind": "class", "description": "unavailable"}, {"name": "id: uid(\"req\"),", "scope": "dataService.createRequest.request", "scopeKind": "class", "description": "unavailable"}, {"name": "isSupabaseConfigured,", "scope": "dataService", "scopeKind": "class", "description": "unavailable"}, {"name": "issueDescription: data.issue_description,", "scope": "dataService.createRequest.created", "scopeKind": "class", "description": "unavailable"}, {"name": "issueDescription,", "scope": "dataService.createRequest.request", "scopeKind": "class", "description": "unavailable"}, {"name": "issue_description: issueDescription,", "scope": "dataService.createRequest.insertPayload", "scopeKind": "class", "description": "unavailable"}, {"name": "make: typeof vehicleObj.make === \"string\" ? vehicleObj.make : \"\",", "scope": "dataService.createRequest.vehicleObj", "scopeKind": "class", "description": "unavailable"}, {"name": "make: vehicle && typeof vehicle.make === \"string\" ? vehicle.make : \"\",", "scope": "dataService.createRequest.safeVehicle", "scopeKind": "class", "description": "unavailable"}, {"name": "model: typeof vehicleObj.model === \"string\" ? vehicleObj.model : \"\",", "scope": "dataService.createRequest.vehicleObj", "scopeKind": "class", "description": "unavailable"}, {"name": "model: vehicle && typeof vehicle.model === \"string\" ? vehicle.model : \"\",", "scope": "dataService.createRequest.safeVehicle", "scopeKind": "class", "description": "unavailable"}, {"name": "name: contact?.name || \"\",", "scope": "dataService.createRequest.safeContact", "scopeKind": "class", "description": "unavailable"}, {"name": "notes: [],", "scope": "dataService.createRequest.insertPayload", "scopeKind": "class", "description": "unavailable"}, {"name": "notes: data.notes || [],", "scope": "dataService.createRequest.created", "scopeKind": "class", "description": "unavailable"}, {"name": "phone: contact?.phone || \"\",", "scope": "dataService.createRequest.safeContact", "scopeKind": "class", "description": "unavailable"}, {"name": "requests: \"rrqa.requests\",", "scope": "LS_KEYS", "scopeKind": "class", "description": "unavailable"}, {"name": "seeded: \"rrqa.seeded\",", "scope": "LS_KEYS", "scopeKind": "class", "description": "unavailable"}, {"name": "session: \"rrqa.session\",", "scope": "LS_KEYS", "scopeKind": "class", "description": "unavailable"}, {"name": "status: \"open\", \\/\\/ always open on create", "scope": "dataService.createRequest.insertPayload", "scopeKind": "class", "description": "unavailable"}, {"name": "status: data.status,", "scope": "dataService.createRequest.created", "scopeKind": "class", "description": "unavailable"}, {"name": "updated_at: nowIso,", "scope": "dataService.createRequest.insertPayload", "scopeKind": "class", "description": "unavailable"}, {"name": "userEmail: data.user_email,", "scope": "dataService.createRequest.created", "scopeKind": "class", "description": "unavailable"}, {"name": "userEmail: user.email,", "scope": "dataService.createRequest.request", "scopeKind": "class", "description": "unavailable"}, {"name": "userId: data.user_id,", "scope": "dataService.createRequest.created", "scopeKind": "class", "description": "unavailable"}, {"name": "userId: user.id,", "scope": "dataService.createRequest.request", "scopeKind": "class", "description": "unavailable"}, {"name": "user_email: user.email,", "scope": "dataService.createRequest.insertPayload", "scopeKind": "class", "description": "unavailable"}, {"name": "user_id: user.id,", "scope": "dataService.createRequest.insertPayload", "scopeKind": "class", "description": "unavailable"}, {"name": "users: \"rrqa.users\",", "scope": "LS_KEYS", "scopeKind": "class", "description": "unavailable"}, {"name": "vehicle: safeVehicle,", "scope": "dataService.createRequest.insertPayload", "scopeKind": "class", "description": "unavailable"}, {"name": "vehicle: vehicleObj,", "scope": "dataService.createRequest.created", "scopeKind": "class", "description": "unavailable"}, {"name": "vehicle: safeVehicle, \\/\\/ only make\\/model is stored for \"vehicle\"", "scope": "dataService.createRequest.request", "scopeKind": "class", "description": "unavailable"}]}