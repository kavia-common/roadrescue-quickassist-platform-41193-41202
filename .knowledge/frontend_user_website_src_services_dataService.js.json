{"is_source_file": true, "format": "JavaScript", "description": "This file provides a data service interface for interacting with a Supabase backend, including user authentication, profile management, and request handling for a vehicle rescue platform.", "external_files": ["./statusUtils", "./supabaseClient", "../config/appConfig", "../utils/withTimeout"], "external_methods": ["getSupabase", "normalizeStatus", "withTimeout"], "published": ["dataService"], "classes": [], "methods": [{"name": "supaUserToAppUser", "description": "Converts a Supabase auth user object into a minimal app user object with role and approval status."}, {"name": "normalizeVehicle", "description": "Normalizes vehicle data from database row or input object to a standardized {make, model} format."}, {"name": "normalizeContact", "description": "Normalizes contact data from database row or input object to a standardized {name, phone} format."}, {"name": "normalizeSupabaseAuthError", "description": "Converts Supabase error messages into user-friendly strings."}, {"name": "register", "description": "Registers a new user with email and password via Supabase auth."}, {"name": "login", "description": "Logs in a user with email and password via Supabase auth."}, {"name": "loginWithGoogle", "description": "Initiates OAuth login with Google via Supabase."}, {"name": "logout", "description": "Signs out the current user."}, {"name": "getUserFromSession", "description": "Retrieves the current authenticated user based on session cache."}, {"name": "getCurrentUser", "description": "Retrieves the current authenticated user directly from Supabase."}, {"name": "subscribeToAuthChanges", "description": "Subscribes to authentication state changes and provides enriched user info."}, {"name": "getProfile", "description": "Fetches user profile data from the 'profiles' table."}, {"name": "listRequests", "description": "Lists request records, optionally filtered by user ID."}, {"name": "getRequestById", "description": "Fetches a specific request record by ID."}, {"name": "createRequest", "description": "Creates a new request record with vehicle, contact, issue, and location data."}, {"name": "isSupabaseConfigured", "description": "Checks if Supabase environment variables are configured (always returns true here)."}], "calls": ["getSupabase", "normalizeStatus", "withTimeout", "supabase.auth.signUp", "supabase.auth.signInWithPassword", "supabase.auth.signInWithOAuth", "supabase.auth.signOut", "supabase.auth.getSession", "supabase.auth.getUser", "supabase.from", "supabase.auth.onAuthStateChange"], "search-terms": ["dataService", "supabase", "auth", "requests", "profile", "vehicle normalization", "location data", "createRequest", "user management"], "state": 2, "file_id": 73, "knowledge_revision": 771, "git_revision": "4df64072ecff4147ced1d3bd08d6f9db6d098f5b", "revision_history": [{"352": "15b5e00133c728e31f7cfdd11b3f578418e3e946"}, {"498": "4df64072ecff4147ced1d3bd08d6f9db6d098f5b"}, {"537": "4df64072ecff4147ced1d3bd08d6f9db6d098f5b"}, {"576": "4df64072ecff4147ced1d3bd08d6f9db6d098f5b"}, {"607": "4df64072ecff4147ced1d3bd08d6f9db6d098f5b"}, {"642": "4df64072ecff4147ced1d3bd08d6f9db6d098f5b"}, {"693": "4df64072ecff4147ced1d3bd08d6f9db6d098f5b"}, {"732": "4df64072ecff4147ced1d3bd08d6f9db6d098f5b"}, {"771": "4df64072ecff4147ced1d3bd08d6f9db6d098f5b"}], "ctags": [], "filename": "frontend_user_website/src/services/dataService.js", "format-version": 4, "code-base-name": "https://github.com/kavia-common/roadrescue-quickassist-platform-41193-41202.git:kavia-main"}