{"is_source_file": true, "format": "JavaScript", "description": "This file defines a data service module for a web application, handling user authentication, request management, and local storage fallback. It interfaces with a Supabase backend if configured, otherwise uses localStorage for mock data. It includes functions for user registration, login, OAuth login, session management, and request CRUD operations, with special handling for vehicle and contact data structures.", "external_files": ["./statusUtils", "./supabaseClient"], "external_methods": ["normalizeStatus", "supabase", "isSupabaseConfigured as isSupabaseConfiguredClient"], "published": ["dataService"], "classes": [], "methods": [{"name": "register", "description": "Registers a new user via Supabase or local mock, creates seed data if not seeded."}, {"name": "login", "description": "Logs in a user via Supabase or local mock, verifies credentials."}, {"name": "loginWithGoogle", "description": "Initiates OAuth login with Google via Supabase."}, {"name": "logout", "description": "Logs out the current user, clears session."}, {"name": "getCurrentUser", "description": "Retrieves the current authenticated user info from Supabase or local mock."}, {"name": "subscribeToAuthChanges", "description": "Subscribes to auth state changes in Supabase, calls callback on change."}, {"name": "listRequests", "description": "Lists all requests, with optional filtering by user ID, normalizes vehicle and contact data."}, {"name": "getRequestById", "description": "Fetches a specific request by ID."}, {"name": "createRequest", "description": "Creates a new request, inserts into Supabase or local storage, normalizes data."}, {"name": "isSupabaseConfigured", "description": "Checks if Supabase environment variables are set, indicating backend configuration."}], "calls": ["normalizeStatus", "supabase", "isSupabaseConfiguredClient", "supa.auth.signUp", "supa.auth.signInWithPassword", "supa.auth.signInWithOAuth", "supa.auth.signOut", "supa.auth.getUser", "supa.from", "supaGetUserRole", "supaUserToAppUser"], "search-terms": ["dataService", "localStorage", "supabase", "requests", "user authentication", "vehicle data", "contact data", "seed data", "OAuth Google", "request creation"], "state": 2, "file_id": 46, "knowledge_revision": 242, "git_revision": "15b5e00133c728e31f7cfdd11b3f578418e3e946", "revision_history": [{"191": "3025b3e4a5b188b27382691bd8c47200eeb5cf56"}, {"200": "ca09881e92259bc04b5062fe7eafb5aba25ec941"}, {"205": "ca09881e92259bc04b5062fe7eafb5aba25ec941"}, {"242": "15b5e00133c728e31f7cfdd11b3f578418e3e946"}], "ctags": [], "filename": "frontend_user_website/src/services/dataService.js", "format-version": 4, "code-base-name": "https://github.com/kavia-common/roadrescue-quickassist-platform-41193-41202.git:kavia-main"}