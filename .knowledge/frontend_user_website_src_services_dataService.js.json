{"is_source_file": true, "format": "JavaScript", "description": "This file defines a data service module for handling user registration, login, session management, and request data operations, supporting both localStorage mock mode and integration with Supabase backend. It includes functions for managing requests, users, sessions, and authentication, with detailed handling of vehicle and contact data structures.", "external_files": ["./statusUtils", "./supabaseClient"], "external_methods": ["normalizeStatus", "supabase", "isSupabaseConfigured as isSupabaseConfiguredClient"], "published": ["dataService"], "classes": [], "methods": [{"name": "register", "description": "Registers a new user with email and password, using Supabase if configured, otherwise adds to local storage mock."}, {"name": "login", "description": "Logs in a user with email and password, using Supabase if configured, otherwise checks local storage."}, {"name": "loginWithGoogle", "description": "Initiates OAuth login with Google via Supabase."}, {"name": "logout", "description": "Logs out the current user, clearing session in local storage or via Supabase."}, {"name": "getCurrentUser", "description": "Retrieves the current authenticated user, via Supabase or local storage."}, {"name": "subscribeToAuthChanges", "description": "Subscribes to authentication state changes, calling callback on user change."}, {"name": "listRequests", "description": "Lists all requests, with optional filtering by user ID, normalizing vehicle and contact data."}, {"name": "getRequestById", "description": "Retrieves a specific request by its ID."}, {"name": "createRequest", "description": "Creates a new request, storing minimal vehicle info and contact details, supporting both Supabase and local storage modes."}, {"name": "isSupabaseConfigured", "description": "Checks if Supabase environment variables are set, indicating backend configuration."}], "calls": ["normalizeStatus", "supabase", "isSupabaseConfiguredClient", "supa.from", "supa.auth.signUp", "supa.auth.signInWithPassword", "supa.auth.signInWithOAuth", "supa.auth.signOut", "supa.auth.getUser", "supaUserToAppUser", "supaGetUserRole"], "search-terms": ["dataService", "localStorage", "supabase", "requests", "user registration", "authentication", "vehicle data handling", "request creation", "request listing"], "state": 2, "file_id": 73, "knowledge_revision": 399, "git_revision": "15b5e00133c728e31f7cfdd11b3f578418e3e946", "revision_history": [{"352": "15b5e00133c728e31f7cfdd11b3f578418e3e946"}, {"399": "15b5e00133c728e31f7cfdd11b3f578418e3e946"}], "ctags": [], "filename": "frontend_user_website/src/services/dataService.js", "format-version": 4, "code-base-name": "https://github.com/kavia-common/roadrescue-quickassist-platform-41193-41202.git:kavia-main"}