{"is_source_file": true, "format": "JavaScript", "description": "This file defines a data service module for a web application, handling user authentication, request management, and local storage fallback. It interfaces with a backend (Supabase) when configured, or uses localStorage for mock data. It includes functions for user registration, login, request creation, and real-time auth state subscription, with detailed handling of request data normalization and field mapping.", "external_files": ["./statusUtils", "./supabaseClient"], "external_methods": ["normalizeStatus", "supabase", "isSupabaseConfigured as isSupabaseConfiguredClient"], "published": ["dataService"], "classes": [], "methods": [{"name": "register", "description": "Registers a new user, either via Supabase auth or local mock data, and initializes seed data if not already seeded."}, {"name": "login", "description": "Logs in a user with email and password, using Supabase or local mock data."}, {"name": "loginWithGoogle", "description": "Initiates OAuth login with Google via Supabase."}, {"name": "logout", "description": "Logs out the current user, via Supabase or local mock data."}, {"name": "getCurrentUser", "description": "Retrieves the current authenticated user, with role and approval info, from Supabase or local storage."}, {"name": "subscribeToAuthChanges", "description": "Subscribes to authentication state changes, providing real-time updates."}, {"name": "listRequests", "description": "Lists all requests, with normalization of vehicle and contact fields, from Supabase or local storage."}, {"name": "getRequestById", "description": "Fetches a specific request by ID."}, {"name": "createRequest", "description": "Creates a new request, enforcing field normalization, and inserts into Supabase or local storage."}, {"name": "isSupabaseConfigured", "description": "Checks if Supabase is configured based on environment variables."}], "calls": ["normalizeStatus", "supabase", "isSupabaseConfiguredClient", "supa.auth.signUp", "supa.auth.signInWithPassword", "supa.auth.signInWithOAuth", "supa.auth.signOut", "supa.auth.getUser", "supa.from", "supaGetUserRole", "supaUserToAppUser"], "search-terms": ["dataService", "localStorage mock", "Supabase auth", "request management", "user authentication", "request creation", "field normalization", "vehicle and contact handling", "environment configuration"], "state": 2, "file_id": 46, "knowledge_revision": 308, "git_revision": "15b5e00133c728e31f7cfdd11b3f578418e3e946", "revision_history": [{"191": "3025b3e4a5b188b27382691bd8c47200eeb5cf56"}, {"200": "ca09881e92259bc04b5062fe7eafb5aba25ec941"}, {"205": "ca09881e92259bc04b5062fe7eafb5aba25ec941"}, {"242": "15b5e00133c728e31f7cfdd11b3f578418e3e946"}, {"275": "15b5e00133c728e31f7cfdd11b3f578418e3e946"}, {"308": "15b5e00133c728e31f7cfdd11b3f578418e3e946"}], "ctags": [], "filename": "frontend_user_website/src/services/dataService.js", "format-version": 4, "code-base-name": "https://github.com/kavia-common/roadrescue-quickassist-platform-41193-41202.git:kavia-main"}